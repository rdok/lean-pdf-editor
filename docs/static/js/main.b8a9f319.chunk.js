(this["webpackJsonppdf-editor"]=this["webpackJsonppdf-editor"]||[]).push([[0],{109:function(e,t,a){},115:function(e,t){},116:function(e,t){},117:function(e,t){},118:function(e,t){},119:function(e,t){},144:function(e,t,a){},146:function(e,t,a){},147:function(e,t,a){},148:function(e,t,a){},149:function(e,t,a){},150:function(e,t,a){},151:function(e,t,a){},152:function(e,t,a){"use strict";a.r(t);var n=a(4),r=a.n(n),i=a(46),u=a.n(i),c=a(15),l=a.n(c),s=a(18),o=a(44),m=a(45),f=a(22),d=a(53),p=a(52),h=a(41),g=a(38),v=a(14),b=a(17),P=a(60),x=(a(109),function(){return r.a.createElement("div",{className:"NavBar"},r.a.createElement(P.a,{bg:"primary",variant:"dark"},r.a.createElement(P.a.Brand,{href:"#home"},"Lean PDF Editor")))}),O=a(47),N=(a(143),a(35)),E=a(21),w=(a(144),function(e){var t=e.pageNumber,a=e.numPages,n=e.goToPreviousPage,i=e.goToNextPage,u=e.onPageRangeChange,c=r.a.createElement("span",null,"Page ",t||(a?1:"--")," of ",a||"--");return r.a.createElement(h.a,{className:"Pagination"},r.a.createElement("div",{className:"d-flex justify-content-between"},r.a.createElement(N.a,{variant:"info",disabled:t<=1,className:"float-left",onClick:n},"Previous"),r.a.createElement(b.a,{md:6},r.a.createElement(E.a.Control,{type:"range",custom:!0,min:1,max:a,defaultValue:t,onChange:u})),r.a.createElement(b.a,null," ",c," "),r.a.createElement(N.a,{variant:"info",disabled:t>=a,onClick:i},"Next")))}),k=(a(146),function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).onDocumentLoadSuccess=function(e){var t=e.numPages;n.setState({numPages:t})},n.goToPreviousPage=n.goToPreviousPage.bind(Object(f.a)(n)),n.goToNextPage=n.goToNextPage.bind(Object(f.a)(n)),n.handlePageRangeChange=n.handlePageRangeChange.bind(Object(f.a)(n)),n.handleOutlineItemClicked=n.handleOutlineItemClicked.bind(Object(f.a)(n)),n}return Object(m.a)(a,[{key:"onItemClick",value:function(e){var t=e.pageNumber;this.setState({pageNumber:t})}},{key:"goToPreviousPage",value:function(){var e=this.props.file.pageNumber-1;this.props.onViewUpdated({pageNumber:e})}},{key:"goToNextPage",value:function(){var e=this.props.file.pageNumber+1;this.props.onViewUpdated({pageNumber:e})}},{key:"handlePageRangeChange",value:function(e){var t=Number(e.target.value);this.props.onViewUpdated({pageNumber:t})}},{key:"handleOutlineItemClicked",value:function(e){e.pageIndex;var t=e.pageNumber;this.props.onViewUpdated({pageNumber:t})}},{key:"render",value:function(){var e,t=this.props.file,a=t.numPages,n=t.pageNumber,i=t.data;return e=i instanceof Uint8Array?i.buffer:i,r.a.createElement("div",null,r.a.createElement(h.a,{fluid:!0,className:"Viewer__container__document"},r.a.createElement(O.Document,{file:e,onLoadSuccess:this.onDocumentLoadSuccess},r.a.createElement(g.a,null,r.a.createElement(b.a,{md:4,sm:4},r.a.createElement("h5",null,"Outline"),r.a.createElement(O.Outline,{onItemClick:this.handleOutlineItemClicked,className:"list-group"})),r.a.createElement(b.a,{md:8,sm:8},r.a.createElement(w,{pageNumber:n,numPages:a,goToNextPage:this.goToNextPage,goToPreviousPage:this.goToPreviousPage,onPageRangeChange:this.handlePageRangeChange}),r.a.createElement(O.Page,{key:"page_".concat(n),pageNumber:n}))))))}}]),a}(n.Component)),y=a(27),j=a(94),D=a.n(j),F=(a(147),Object(m.a)((function e(){var t=this;Object(o.a)(this,e),this.getCurrentOutline=function(){var e=Object(s.a)(l.a.mark((function e(t){var a,n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.pdfjs.getDocument({data:t.data}).promise;case 2:return n=e.sent,e.next=5,n.getOutline();case 5:if(e.t1=a=e.sent,e.t0=null!==e.t1,!e.t0){e.next=9;break}e.t0=void 0!==a;case 9:if(!e.t0){e.next=13;break}e.t2=a,e.next=14;break;case 13:e.t2=[];case 14:return r=e.t2,e.abrupt("return",r.map((function(e,t){return{index:t,title:e.title}})));case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getPageRefs=function(e){var t=[];return e.catalog.Pages().traverse((function(e,a){e instanceof v.PDFPageLeaf&&t.push(a)})),t},this.createOutlineItem=function(e,t,a,n,r){var i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],u=v.PDFArray.withContext(e.context);u.push(r),u.push(v.PDFName.of("XYZ")),u.push(v.PDFNull),u.push(v.PDFNull),u.push(v.PDFNull);var c=new Map;return c.set(v.PDFName.Title,v.PDFString.of(t)),c.set(v.PDFName.Parent,a),c.set(v.PDFName.of(i?"Prev":"Next"),n),c.set(v.PDFName.of("Dest"),u),v.PDFDict.fromMapWithContext(c,e.context)},this.normalizeNewOutline=function(){var e=Object(s.a)(l.a.mark((function e(a){var n,r,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.file,r=a.item,e.next=3,t.getCurrentOutline(n);case 3:return(i=e.sent)[r.index]=r,e.abrupt("return",i);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.createOutlineItems=function(e,a,n,r,i){return e.map((function(u){var c,l=u.index,s=u.title,o="undefined"===typeof e[l+1];o?c=a[0===l?0:l-1]:c=a[l+1];return t.createOutlineItem(n,s,r,c,i[l],o)}))},this.save=function(){var e=Object(s.a)(l.a.mark((function e(a,n){var r,i,u,c,s,o,m,f;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=a.file,n){e.next=5;break}return e.next=4,t.getCurrentOutline(r);case 4:n=e.sent;case 5:return e.next=7,v.PDFDocument.load(r.data);case 7:if(i=e.sent,0!==n.length){e.next=12;break}return e.next=11,i.save();case 11:return e.abrupt("return",e.sent);case 12:return u=t.getPageRefs(i),c=i.context.nextRef(),s=n.map((function(){return i.context.nextRef()})),o=t.createOutlineItems(n,s,i,c,u),(m=new Map).set(v.PDFName.Type,v.PDFName.of("Outlines")),m.set(v.PDFName.of("First"),s[0]),m.set(v.PDFName.of("Last"),s[s.length-1]),m.set(v.PDFName.of("Count"),v.PDFNumber.of(s.length)),i.catalog.set(v.PDFName.of("Outlines"),c),f=v.PDFDict.fromMapWithContext(m,i.context),i.context.assign(c,f),s.forEach((function(e,t){i.context.assign(s[t],o[t])})),e.next=27,i.save();case 27:return e.abrupt("return",e.sent);case 28:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),this.addOutlineItem=function(){var e=Object(s.a)(l.a.mark((function e(a){var n,r,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.file,r=a.item,e.next=3,t.normalizeNewOutline({file:n,item:r});case 3:return i=e.sent,e.abrupt("return",t.save({file:n},i));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.prepareDownload=function(){var e=Object(s.a)(l.a.mark((function e(a){var n,r,i,u,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.file,e.next=3,t.getCurrentOutline(n);case 3:return r=e.sent,e.next=6,v.PDFDocument.load(n.data);case 6:return i=e.sent,e.next=9,v.PDFDocument.create();case 9:return u=e.sent,e.next=12,u.copyPages(i,i.getPageIndices());case 12:return e.sent.forEach((function(e){u.addPage(e)})),c=n,e.next=17,u.save();case 17:return c.data=e.sent,e.abrupt("return",t.save({file:c},r));case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}))),C=new F,S=function(e){var t=e.file,a=Object(n.useState)(!1),i=Object(y.a)(a,2),u=i[0],c=i[1],o=function(){var e=Object(s.a)(l.a.mark((function e(a){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(!0),n=t.name,e.next=4,C.prepareDownload({file:t});case 4:r=e.sent,D()(r,n,"application/pdf"),c(!1);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"Saver"},r.a.createElement(N.a,{variant:"primary",onClick:o,disabled:u},u?"Processing...":"Save"))},R=(a(148),function(e){var t=e.file,a=e.onFileAttached,n=t?t.name:"";return r.a.createElement("div",{className:"File"},r.a.createElement("h2",null,"File"),r.a.createElement(E.a,null,r.a.createElement(E.a.File,{label:n,custom:!0,onChange:a})))}),I=(a(149),function(e){var t=e.file,a=e.onPagesRemoval,i=Object(n.useState)(!1),u=Object(y.a)(i,2),c=u[0],o=u[1],m=Object(n.useState)(1),f=Object(y.a)(m,2),d=f[0],p=f[1],h=Object(n.useState)(1),v=Object(y.a)(h,2),P=v[0],x=v[1],O=Object(n.useState)(!1),w=Object(y.a)(O,2),k=w[0],j=w[1],D=function(){var e=Object(s.a)(l.a.mark((function e(t){var n,r,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),n=t.currentTarget,r=!0===n.checkValidity(),o(!0),!r){e.next=10;break}return j(!0),i={startIndex:Number(d)-1,endIndex:Number(P)-1},e.next=9,a(i);case 9:j(!1);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(E.a,{noValidate:!0,validated:c,onSubmit:D,className:"RangeRemover"},r.a.createElement("h5",null,"Range remover"),r.a.createElement(g.a,null,r.a.createElement(b.a,null,r.a.createElement(E.a.Control,{type:"number",min:"1",max:t.numPages,placeholder:"Page start",value:d,onChange:function(e){var t=e.target;p(t.value)},required:!0})),r.a.createElement(b.a,null,r.a.createElement(E.a.Control,{type:"number",min:d,max:t.numPages,value:P,onChange:function(e){var t=e.target;x(t.value)},placeholder:"Page end",required:!0})),r.a.createElement(N.a,{variant:"warning",type:"submit",disabled:k},k?"Processing...":"Remove")))}),T=(a(150),new F),U=function(e){var t=e.file,a=e.onOutlinerUpdated,i=Object(n.useState)(!1),u=Object(y.a)(i,2),c=u[0],o=u[1],m=Object(n.useState)(!1),f=Object(y.a)(m,2),d=f[0],p=f[1];function h(){return(h=Object(s.a)(l.a.mark((function e(n){var r,i,u,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),r=n.currentTarget,i=!0===r.checkValidity(),o(!0),!i){e.next=12;break}return p(!0),u={index:t.pageNumber-1,title:String(r.title.value)},e.next=9,T.addOutlineItem({file:t,item:u});case 9:c=e.sent,a({data:c}),p(!1);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return r.a.createElement(E.a,{className:"Outliner",onSubmit:function(e){return h.apply(this,arguments)},noValidate:!0,validated:c},r.a.createElement("h5",null,"Bookmark"),r.a.createElement(g.a,null,r.a.createElement(b.a,null,r.a.createElement(E.a.Control,{name:"title",type:"text",placeholder:"Title",defaultValue:"test",required:!0})),r.a.createElement(N.a,{variant:"warning",type:"submit"},d?"Processing...":"Apply")))},V=(a(151),function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={file:{name:"./sample.pdf",data:null,numPages:null,pageNumber:1,minPage:0}},n.handleFileAttached=n.handleFileAttached.bind(Object(f.a)(n)),n.handlePagesRemoval=n.handlePagesRemoval.bind(Object(f.a)(n)),n.handleViewUpdated=n.handleViewUpdated.bind(Object(f.a)(n)),n.handleOutlinerUpdated=n.handleOutlinerUpdated.bind(Object(f.a)(n)),n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=Object(s.a)(l.a.mark((function e(){var t,a,n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state.file.name,e.next=3,fetch(t).then((function(e){return e.arrayBuffer()}));case 3:return a=e.sent,e.next=6,v.PDFDocument.load(a);case 6:n=e.sent,r=n.getPageCount(),this.setState({file:{name:t,data:a,numPages:r,pageNumber:1}});case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleFileAttached",value:function(){var e=Object(s.a)(l.a.mark((function e(t){var a,n,r,i,u;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.target.files[0],n=a.name,e.next=4,a.arrayBuffer();case 4:return r=e.sent,e.next=7,v.PDFDocument.load(r);case 7:i=e.sent,u=i.getPageCount(),1,this.setState({file:{name:n,data:r,pageNumber:1,numPages:u}});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handlePagesRemoval",value:function(){var e=Object(s.a)(l.a.mark((function e(t){var a,n,r,i,u,c,s,o,m,f,d,p;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.startIndex,n=t.endIndex,r=this.state.file,i=r.name,u=r.data,c=r.pageNumber,e.next=4,v.PDFDocument.load(u);case 4:for(s=e.sent,o=a,m=n;o<=m;)s.removePage(m),m--;return e.next=10,s.save();case 10:f=e.sent,d=s.getPageCount(),p=Math.min(d,c),this.setState({file:{name:i,data:f,pageNumber:p,numPages:d}});case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleOutlinerUpdated",value:function(e){var t=e.data,a=this.state.file;a.data=t,this.setState({file:a})}},{key:"handleViewUpdated",value:function(e){var t=e.pageNumber,a=this.state.file;a.pageNumber=t,this.setState({file:a})}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(x,null),r.a.createElement(h.a,{fluid:!0},r.a.createElement(g.a,null,r.a.createElement(b.a,{md:4},r.a.createElement(h.a,{fluid:!0,className:"sticky-top"},r.a.createElement(R,{file:this.state.file,onFileAttached:this.handleFileAttached}),r.a.createElement(I,{file:this.state.file,onPagesRemoval:this.handlePagesRemoval}),r.a.createElement(U,{file:this.state.file,onOutlinerUpdated:this.handleOutlinerUpdated}),r.a.createElement(S,{file:this.state.file}))),r.a.createElement(b.a,{md:8},r.a.createElement(k,{file:this.state.file,onViewUpdated:this.handleViewUpdated})))))}}]),a}(r.a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));u.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(V,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},69:function(e,t){},95:function(e,t,a){e.exports=a(152)}},[[95,1,2]]]);
//# sourceMappingURL=main.b8a9f319.chunk.js.map